<?php

// Test script untuk memverifikasi perbaikan error 500
// Jalankan dengan: php artisan tinker < test_error_fix.php

echo \"=== Testing Error 500 Fix ===\\n\";\n\n// Test 1: Cek apakah middleware terdaftar\necho \"1. Checking middleware registration...\\n\";\ntry {\n    $app = app();\n    echo \"✓ Application loaded successfully\\n\";\n} catch (Exception $e) {\n    echo \"✗ Error loading application: \" . $e->getMessage() . \"\\n\";\n}\n\n// Test 2: Cek model relationships\necho \"\\n2. Testing model relationships...\\n\";\ntry {\n    $kelas = \\App\\Models\\Kelas::with(['waliKelas', 'tahunAjaran'])->first();\n    if ($kelas) {\n        echo \"✓ Kelas model loaded with relationships\\n\";\n    } else {\n        echo \"! No kelas data found\\n\";\n    }\n} catch (Exception $e) {\n    echo \"✗ Error loading kelas: \" . $e->getMessage() . \"\\n\";\n}\n\n// Test 3: Cek guru relationships\necho \"\\n3. Testing guru relationships...\\n\";\ntry {\n    $guru = \\App\\Models\\Guru::with('user')->first();\n    if ($guru) {\n        echo \"✓ Guru model loaded with user relationship\\n\";\n    } else {\n        echo \"! No guru data found\\n\";\n    }\n} catch (Exception $e) {\n    echo \"✗ Error loading guru: \" . $e->getMessage() . \"\\n\";\n}\n\n// Test 4: Cek siswa relationships\necho \"\\n4. Testing siswa relationships...\\n\";\ntry {\n    $siswa = \\App\\Models\\Siswa::with(['kelas', 'tahunAjaran', 'user'])->first();\n    if ($siswa) {\n        echo \"✓ Siswa model loaded with relationships\\n\";\n    } else {\n        echo \"! No siswa data found\\n\";\n    }\n} catch (Exception $e) {\n    echo \"✗ Error loading siswa: \" . $e->getMessage() . \"\\n\";\n}\n\necho \"\\n=== Test completed ===\\n\";\necho \"If all tests pass, the error 500 fixes should be working.\\n\";\necho \"Try accessing the problematic URLs now.\\n\";\n